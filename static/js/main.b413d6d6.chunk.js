(this["webpackJsonpdefi-account-summary"]=this["webpackJsonpdefi-account-summary"]||[]).push([[0],{202:function(e,t,n){},215:function(e,t){},238:function(e,t){},240:function(e,t){},317:function(e,t){},319:function(e,t){},351:function(e,t){},356:function(e,t){},358:function(e,t){},365:function(e,t){},378:function(e,t){},457:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n(34),r=n.n(s),c=n(192),i=n.n(c),o=(n(202),n(14)),u=n.n(o),l=n(36),d=n(5),p=n(6),m=n(11),h=n(10),b=n(70),f=n(193),y=n.n(f),v=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],payable:!1,type:"constructor"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}],x=n(463);n(457);window.runMonteCarloSimulation=function(e,t,n){var a=function(t){return Math.random()>=e?0:1},s=Array.from(Array(t).keys()),r=Array.from(Array(n).keys()),c={};r.forEach((function(){var e=s.map(a).reduce((function(e,t,n,a){return e+t}),0),t=c[e];c[e]=(t||0)+1})),console.log(c);for(var i,o=(i=Object.values(c),Math.max.apply(null,i)),u=0,l=Object.entries(c);u<l.length;u++){var d=Object(b.a)(l[u],2),p=d[0];if(+d[1]===o)return"most likely outcome: ".concat(p,"; ocurrences ").concat(o,"/").concat(n," (").concat(Object(x.a)(".2f")(o/n*100),"%)")}return""};var j=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).canvas=void 0,a.canvas=r.a.createRef(),a.state={web3:void 0,accountAddress:void 0,isLoaded:!1,allTokens:{},tokenBalances:{},tokenPrices:{}},a}return Object(p.a)(n,[{key:"isMetamaskInstalled",value:function(){return"undefined"!==typeof window.ethereum}},{key:"updateEthBalance",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.web3){e.next=10;break}return n=this.state,a=n.tokenPrices,s=n.tokenBalances,r=n.allTokens,s.ETH=this.state.web3.utils.fromWei(t),e.next=5,this.fetchEthPrice();case 5:a.ETH=e.sent,r.ETH={symbol:"ETH",name:"Ehereum",address:"",decimals:18,logoURI:""},this.setState({tokenPrices:a,tokenBalances:s,allTokens:r}),e.next=11;break;case 10:console.error("web3 is not yet initialized");case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTokenBalance",value:function(e,t){if(this.state.web3){var n=this.state.web3.utils.fromWei(t);if(+n>0){var a=this.state,s=a.tokenBalances,r=a.allTokens;s[e]=n,this.fetchTokenPrices([r[e].address]),this.setState({tokenBalances:s})}}else console.error("web3 is not yet initialized")}},{key:"fetchTokenBalance",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,s,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.accountAddress,s=n.address,r=new t.eth.Contract(v,s),e.next=5,r.methods.balanceOf(a).call();case 5:c=e.sent,this.updateTokenBalance(n.symbol,c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connectToMetaMask",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:t=e.sent,n=t[0],a=new y.a(window.ethereum),this.setState({web3:a,accountAddress:n}),a.eth.getBalance(n).then(this.updateEthBalance.bind(this)),Object.values(this.state.allTokens).forEach((function(e){s.fetchTokenBalance(a,e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findTokenByAddress",value:function(e){var t=this.state.allTokens;return Object.values(t).find((function(t){return t.address===e}))}},{key:"fetchEthPrice",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.ethereum.usd);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTokenPrices",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,s,r,c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.join(","),a="https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=".concat(n,"&vs_currencies=usd"),e.next=4,fetch(a);case 4:return s=e.sent,e.next=7,s.json();case 7:r=e.sent,Object.entries(r).forEach((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1],s=c.findTokenByAddress(n);if(s){var r=a.usd,i=c.state.tokenPrices;i[s.symbol]=r,c.setState({tokenPrices:i})}else console.error("Unable to find token with address ".concat(n))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.1inch.exchange/v2.0/tokens");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a={},Object.values(n.tokens).forEach((function(e,t,n){a[e.symbol]=e})),this.setState({isLoaded:!0,allTokens:a}),this.renderBackground();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tokenBalance",value:function(e){return+this.state.tokenBalances[e]}},{key:"tokenPrice",value:function(e){return+this.state.tokenPrices[e]}},{key:"determineUSDAccountSize",value:function(){var e=this.state,t=e.tokenBalances,n=e.tokenPrices;return Object.entries(t).reduce((function(e,t){var a=Object(b.a)(t,2),s=a[0],r=a[1];return e+ +n[s]*+r}),0)}},{key:"renderTokenBalance",value:function(e){var t=e.symbol,n=this.tokenPrice(t)||0,s=this.tokenBalance(t)||0,r=n*s,c=Object(x.a)("$,.2f"),i=Object(x.a)(".2f");if(r>.05)return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:t}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:i(s)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:c(n)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:c(r)})]},t)}},{key:"renderBackground",value:function(){var e=this.canvas.current,t=null===e||void 0===e?void 0:e.getContext("2d");if(t&&e){var n=window.innerWidth,a=window.innerHeight;e.width=n,e.height=a;for(var s=0;s<n/2;s++)for(var r=0;r<a/2;r++){var c=255*s/n,i=255*r/a;t.fillStyle="rgb(".concat(c,", ").concat(i,", ").concat(0,")"),t.fillRect(2*s,2*r,2,2),(s^r)%7&&(t.fillStyle="rgb(0, 0, 0)",t.fillRect(2*s,2*r,2,2))}}}},{key:"sortTokenList",value:function(){var e=this.state.allTokens,t=Object.values(e);return t.sort((function(e,t){var n=e.symbol,a=t.symbol;return n<a?-1:n>a?1:0})),t}},{key:"render",value:function(){if(!this.state)return Object(a.jsx)("div",{children:"Loading..."});var e=this.state,t=e.accountAddress,n=e.tokenBalances,s=Object(x.a)("$,.2f"),r=this.determineUSDAccountSize(),c=this.sortTokenList();return Object(a.jsxs)("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:[Object(a.jsx)("canvas",{ref:this.canvas,style:{position:"absolute"}}),Object(a.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[Object(a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-light-blue-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl bg-gray-400"}),Object(a.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:Object(a.jsx)("div",{className:"max-w-md mx-auto",children:Object(a.jsx)("div",{className:"divide-y divide-gray-200",children:Object(a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(a.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Deephy"}),Object(a.jsx)("p",{children:"Get a detailed balance of your DeFi tokens and an account overview. Click the button below to get started."}),this.isMetamaskInstalled()&&!this.state.web3&&Object(a.jsx)("button",{onClick:this.connectToMetaMask.bind(this),className:"text-white mt-auto bg-emerald-800 bg-opacity-50 hover:bg-opacity-75 transition-colors duration-200 rounded-xl font-semibold py-2 px-4 inline-flex",children:"Connect to MetaMask"}),t&&Object(a.jsxs)("p",{children:["Address:",Object(a.jsx)("br",{}),Object(a.jsx)("code",{children:Object(a.jsx)("small",{children:t})})]}),r>0&&Object(a.jsx)("p",{className:"font-semibold text-2xl pb-3",children:s(r)}),Object.values(n).length>0&&Object(a.jsx)("div",{children:Object(a.jsxs)("table",{className:"table-auto",children:[Object(a.jsx)("thead",{className:"bg-indigo-200",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Token"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Amount"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Current price"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Equity"})]})}),Object(a.jsx)("tbody",{children:c.map(this.renderTokenBalance.bind(this))})]})})]})})})})]})]})}}]),n}(r.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,464)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(j,{})}),document.getElementById("root")),k()}},[[458,1,2]]]);
//# sourceMappingURL=main.b413d6d6.chunk.js.map