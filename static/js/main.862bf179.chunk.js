(this["webpackJsonpdefi-account-summary"]=this["webpackJsonpdefi-account-summary"]||[]).push([[0],{201:function(e,t,n){},214:function(e,t){},237:function(e,t){},239:function(e,t){},316:function(e,t){},318:function(e,t){},350:function(e,t){},355:function(e,t){},357:function(e,t){},364:function(e,t){},377:function(e,t){},456:function(e,t,n){},457:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n(46),i=n.n(s),c=n(191),o=n.n(c),r=(n(201),n(21)),l=n.n(r),u=n(102),d=n(5),p=n(6),b=n(11),m=n(10),h=n(192),y=n.n(h),f=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],payable:!1,type:"constructor"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}],x=n(462),j=(n(456),function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).relevantTokens=["DAI","LINK","UNI","AAVE","SUSHI","SNX","COMP","ZRX","FTM","MIR","1INCH"],a.state={web3:void 0,accountAddress:void 0,isLoaded:!1,ethBalance:void 0,allTokens:{},tokenBalances:{},tokenPrices:{}},a}return Object(p.a)(n,[{key:"isMetamaskInstalled",value:function(){return"undefined"!==typeof window.ethereum}},{key:"updateEthBalance",value:function(e){if(this.state.web3){var t=this.state.web3.utils.fromWei(e);this.setState({ethBalance:t})}else console.error("web3 is not yet initialized")}},{key:"updateTokenBalance",value:function(e,t){if(this.state.web3){var n=this.state,a=n.tokenBalances,s=n.web3;a[e]=s.utils.fromWei(t),this.setState({tokenBalances:a})}else console.error("web3 is not yet initialized")}},{key:"connectToMetaMask",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:t=e.sent,n=t[0],a=new y.a(window.ethereum),this.setState({web3:a,accountAddress:n}),a.eth.getBalance(n).then(this.updateEthBalance.bind(this)),this.relevantTokens.forEach((function(e){var t=s.state.allTokens[e].address;new a.eth.Contract(f,t).methods.balanceOf(n).call().then((function(t){s.updateTokenBalance(e,t)})),s.fetchTokenPrice(t).then((function(t){var n=s.state.tokenPrices;n[e]=t,s.setState({tokenPrices:n})}))}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTokenPrice",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=".concat(t,"&vs_currencies=usd")).then((function(e){return e.json()})).then((function(e){return Object.values(e)[0].usd})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;fetch("https://api.1inch.exchange/v2.0/tokens").then((function(e){return e.json()})).then((function(t){var n={};Object.values(t.tokens).forEach((function(e,t,a){n[e.symbol]=e})),e.setState({isLoaded:!0,allTokens:n})}))}},{key:"renderTokenBalance",value:function(e){var t=this.state,n=t.tokenBalances,s=t.tokenPrices,i=e.symbol,c=+n[i],o=+s[i],r=o*c,l=Object(x.a)("$,.2f"),u=Object(x.a)(".2f");if(c)return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:i}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:u(c)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:l(o)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:l(r)})]},i)}},{key:"render",value:function(){if(!this.state)return Object(a.jsx)("div",{children:"Loading..."});var e=this.state,t=e.allTokens,n=e.ethBalance,s=e.accountAddress,i=e.tokenBalances,c=Object(x.a)(".2f");return Object(a.jsx)("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:Object(a.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[Object(a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-light-blue-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),Object(a.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:Object(a.jsx)("div",{className:"max-w-md mx-auto",children:Object(a.jsx)("div",{className:"divide-y divide-gray-200",children:Object(a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(a.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Deephy"}),Object(a.jsx)("p",{children:"Get a detailed balance of your DeFi tokens and get an account overview. Click the button below to get started."}),this.isMetamaskInstalled()&&!this.state.web3&&Object(a.jsx)("button",{onClick:this.connectToMetaMask.bind(this),className:"text-white mt-auto bg-emerald-800 bg-opacity-50 hover:bg-opacity-75 transition-colors duration-200 rounded-xl font-semibold py-2 px-4 inline-flex",children:"Connect to MetaMask"}),s&&Object(a.jsxs)("p",{children:["Address:"," ",Object(a.jsx)("code",{children:Object(a.jsx)("small",{children:s})})]}),Object.values(i).length>0&&Object(a.jsx)("div",{children:Object(a.jsxs)("table",{className:"table-auto",children:[Object(a.jsx)("thead",{className:"bg-indigo-200",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Token"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Amount"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Current price"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Equity"})]})}),Object(a.jsxs)("tbody",{children:[n&&Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"ETH"}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:c(+n)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"$0.00"}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"$0.00"})]}),Object.values(t).map(this.renderTokenBalance.bind(this))]})]})})]})})})})]})})}}]),n}(i.a.Component)),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,463)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(j,{})}),document.getElementById("root")),v()}},[[457,1,2]]]);
//# sourceMappingURL=main.862bf179.chunk.js.map