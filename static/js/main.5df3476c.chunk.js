(this["webpackJsonpdefi-account-summary"]=this["webpackJsonpdefi-account-summary"]||[]).push([[0],{202:function(e,t,n){},215:function(e,t){},238:function(e,t){},240:function(e,t){},317:function(e,t){},319:function(e,t){},351:function(e,t){},356:function(e,t){},358:function(e,t){},365:function(e,t){},378:function(e,t){},457:function(e,t,n){},458:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n(46),i=n.n(s),c=n(191),o=n.n(c),r=(n(202),n(194)),l=n(17),u=n.n(l),d=n(69),p=n(5),b=n(6),m=n(11),h=n(10),y=n(192),f=n.n(y),x=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"},{inputs:[{name:"_initialAmount",type:"uint256"},{name:"_tokenName",type:"string"},{name:"_decimalUnits",type:"uint8"},{name:"_tokenSymbol",type:"string"}],payable:!1,type:"constructor"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}],j=n(463),v=(n(457),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={web3:void 0,accountAddress:void 0,isLoaded:!1,ethBalance:void 0,allTokens:{},tokenBalances:{},tokenPrices:{}},a}return Object(b.a)(n,[{key:"isMetamaskInstalled",value:function(){return"undefined"!==typeof window.ethereum}},{key:"updateEthBalance",value:function(e){if(this.state.web3){var t=this.state.web3.utils.fromWei(e);this.setState({ethBalance:t})}else console.error("web3 is not yet initialized")}},{key:"updateTokenBalance",value:function(e,t){if(this.state.web3){var n=this.state.web3.utils.fromWei(t);if(+n>0){var a=this.state,s=a.tokenBalances,i=a.allTokens;s[e]=n,this.fetchTokenPrices([i[e].address]),this.setState({tokenBalances:s})}}else console.error("web3 is not yet initialized")}},{key:"fetchTokenBalance",value:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,s,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.accountAddress,s=n.address,i=new t.eth.Contract(x,s),e.next=5,i.methods.balanceOf(a).call();case 5:c=e.sent,this.updateTokenBalance(n.symbol,c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"connectToMetaMask",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:t=e.sent,n=t[0],a=new f.a(window.ethereum),this.setState({web3:a,accountAddress:n}),a.eth.getBalance(n).then(this.updateEthBalance.bind(this)),Object.values(this.state.allTokens).forEach((function(e){s.fetchTokenBalance(a,e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findTokenByAddress",value:function(e){var t=this.state.allTokens;return Object.values(t).find((function(t){return t.address===e}))}},{key:"fetchTokenPrices",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.join(","),a="https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=".concat(n,"&vs_currencies=usd"),fetch(a).then((function(e){return e.json()})).then((function(e){Object.entries(e).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],i=s.findTokenByAddress(n);if(i){var c=a.usd,o=s.state.tokenPrices;o[i.symbol]=c,s.setState({tokenPrices:o})}else console.error("Unable to find token with address ".concat(n))}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;fetch("https://api.1inch.exchange/v2.0/tokens").then((function(e){return e.json()})).then((function(t){var n={};Object.values(t.tokens).forEach((function(e,t,a){n[e.symbol]=e})),e.setState({isLoaded:!0,allTokens:n})}))}},{key:"renderTokenBalance",value:function(e){var t=this.state,n=t.tokenBalances,s=t.tokenPrices,i=e.symbol,c=+n[i],o=+s[i],r=o*c,l=Object(j.a)("$,.2f"),u=Object(j.a)(".2f");if(c)return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:i}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:u(c)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:l(o)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:l(r)})]},i)}},{key:"render",value:function(){if(!this.state)return Object(a.jsx)("div",{children:"Loading..."});var e=this.state,t=e.allTokens,n=e.ethBalance,s=e.accountAddress,i=e.tokenBalances,c=Object(j.a)(".2f");return Object(a.jsx)("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:Object(a.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[Object(a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-light-blue-500 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),Object(a.jsx)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:Object(a.jsx)("div",{className:"max-w-md mx-auto",children:Object(a.jsx)("div",{className:"divide-y divide-gray-200",children:Object(a.jsxs)("div",{className:"py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7",children:[Object(a.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Deephy"}),Object(a.jsx)("p",{children:"Get a detailed balance of your DeFi tokens and an account overview. Click the button below to get started."}),this.isMetamaskInstalled()&&!this.state.web3&&Object(a.jsx)("button",{onClick:this.connectToMetaMask.bind(this),className:"text-white mt-auto bg-emerald-800 bg-opacity-50 hover:bg-opacity-75 transition-colors duration-200 rounded-xl font-semibold py-2 px-4 inline-flex",children:"Connect to MetaMask"}),s&&Object(a.jsxs)("p",{children:["Address:"," ",Object(a.jsx)("code",{children:Object(a.jsx)("small",{children:s})})]}),Object.values(i).length>0&&Object(a.jsx)("div",{children:Object(a.jsxs)("table",{className:"table-auto",children:[Object(a.jsx)("thead",{className:"bg-indigo-200",children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Token"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Amount"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Current price"}),Object(a.jsx)("th",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"Equity"})]})}),Object(a.jsxs)("tbody",{children:[n&&Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"ETH"}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:c(+n)}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"$0.00"}),Object(a.jsx)("td",{className:"border border-light-blue-500 px-4 py-2 text-light-blue-600 font-medium",children:"$0.00"})]}),Object.values(t).map(this.renderTokenBalance.bind(this))]})]})})]})})})})]})})}}]),n}(i.a.Component)),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,464)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),g()}},[[458,1,2]]]);
//# sourceMappingURL=main.5df3476c.chunk.js.map